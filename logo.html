<html>
<head>

<title>_mmlab_logo</title>

<!-- <script src="include/p5/p5.js"></script>
<script src="include/p5/addons/p5.dom.min.js"></script>

<script src="js/PLogoLeg.js"></script>
<script src="js/PLogoCanvas.js"></script> -->


<script src="include/three/three.js"></script>
<script src="include/three/shaders/CopyShader.js"></script>
<script src="include/three/shaders/ConvolutionShader.js"></script>
<script src="include/three/shaders/RGBShiftShader.js"></script>


<script src="include/three/postprocessing/EffectComposer.js"></script>
<script src="include/three/postprocessing/RenderPass.js"></script>
<script src="include/three/postprocessing/MaskPass.js"></script>
<script src="include/three/postprocessing/ShaderPass.js"></script>

<script src="include/three/postprocessing/BloomPass.js"></script>>
<script src="include/three/postprocessing/DotScreenPass.js"></script>

<script src="include/three/stats.min.js"></script>

<script src="src/index/TLogoLeg.js"></script>

<script id="glitchFragmentShader" type="x-shader/x-fragment">	
	uniform float amount;
	uniform float angle;
	uniform float seed_x;
	uniform float seed_y;
	uniform sampler2D texture;


	varying vec2 vUv;
	float rand(vec2 co){
		return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
	}
	void main(void){


		float seed=0.05;
		// float seed_x=0.02;
		// float seed_y=0.03;
		float distortion_x=0.5;
		float distortion_y=0.2;
		float col_s=0.02;



		vec2 p=vUv;
		float xs=floor(gl_FragCoord.x/0.5);
		float ys=floor(gl_FragCoord.y/0.5);
		


		vec4 normal=texture2D (texture, p*seed*seed);
		p.x+=0.01*amount*distortion_x*rand(vec2(xs * seed,ys * seed*50.));
		p.y+=0.01*amount*distortion_y*rand(vec2(xs * seed,ys * seed*50.));

		// if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed){
		// 	if(seed_x>0.){
		// 		p.y = 1. - (p.y + distortion_y);
		// 	}else {
		// 		p.y = distortion_y;
		// 	}
		// }
		// if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed){
		// 	if(seed_y>0.){
		// 		p.x=distortion_x;
		// 	}else{
		// 		p.x = 1. - (p.x + distortion_x);
		// 	}
		// }

		p.x+=normal.x*seed_x*(seed/5.);
		p.y+=normal.y*seed_y*(seed/5.);
		//base from RGB shift shader
		vec2 offset = amount*0.03 * vec2( cos(angle), sin(angle));
		vec4 cr = texture2D(texture, p + offset);
		vec4 cga = texture2D(texture, p);
		vec4 cb = texture2D(texture, p - offset);

		cr*=amount;
		cb*=amount;

		//float den_=amount*20.0;
		gl_FragColor = vec4(cga.r+cr.r, cga.g+cb.b, cga.b+cr.r+cb.b,(cga.a+cr.a+cb.a)*12.0);
		

		if(gl_FragColor.r<=0.1 && gl_FragColor.b<=0.1 && gl_FragColor.g<=0.1) gl_FragColor.a=0.0;
		else{
			//add noise
			vec4 snow =amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
			gl_FragColor = gl_FragColor+ snow;
		}
	}
</script>
<script id="vertexShader" type="x-shader/x-vertex">	
	varying vec2 vUv;
	void main(){
		vUv=uv;
		vec4 mvPosition=modelViewMatrix*vec4( position, 1.0 );
		gl_Position=projectionMatrix*mvPosition;
	}
</script>


<style type="text/css">		
	canvas{
		position:absolute;
		margin:0;
		left:0;
		top:0;
	}
</style>

</head>

<body>
	<script src="src/index/logoCanvas.js"></script>

</body>

</html>

